<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Free Picks · OverEdge</title>
  <meta name="description" content="Two highest-confidence Over/Under 2.5 Goals selections each day."/>
  <link rel="stylesheet" href="/style.css"/>

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/overedge-logo-512.png">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-88C4MQ3EF8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-88C4MQ3EF8');
  </script>
</head>
<script defer src="/_vercel/speed-insights/script.js"></script>

<body>
<header class="site-header">
  <nav class="nav">
    <a class="logo brand" href="/" aria-label="OverEdge">
      <img class="brand-img" src="/img/overedge-logo.png" alt="">
      <span class="sr-only">OverEdge</span>
    </a>
    <div class="links">
      <a href="/free-picks" aria-current="page">Free Picks</a>
      <a href="/pro">Pro</a>
      <a href="/pricing">Pricing</a>
      <a href="/FAQ">FAQ</a>
      <a href="/account">Account</a>
    </div>
    <div class="auth" style="display:flex;align-items:center;gap:.5rem">
      <span id="nav-plan" class="badge pill" style="display:none"></span>
      <a class="btn small secondary" href="/account">Sign In</a>
    </div>
  </nav>
</header>

<main>
  <section class="section">
    <h1>Today’s Free Picks</h1>
    <p class="muted">Updated daily. We post the two highest-confidence Over/Under 2.5 selections — backed by precise research and data, not gut.</p>

    <div id="list">Loading…</div>
  </section>
</main>

<footer class="site-footer">
  <span>© <span id="y"></span> OverEdge — Data beats gut</span>
  <div class="contact">
    <a href="mailto:overedgestats@gmail.com">overedgestats@gmail.com</a>
    &nbsp;·&nbsp;
    <a href="https://www.facebook.com/profile.php?id=61579190114778" target="_blank" rel="noopener">Facebook</a>
    &nbsp;·&nbsp;
    <a href="https://www.instagram.com/overedgefootball" target="_blank" rel="noopener">@overedgefootball</a>
  </div>
</footer>

<script>
  document.getElementById('y').textContent = new Date().getFullYear();

  function tzGuess(){
    try { return Intl.DateTimeFormat().resolvedOptions().timeZone || "Europe/Sofia"; }
    catch { return "Europe/Sofia"; }
  }

  function pickCard(p){
    const league = [p.country, p.league].filter(Boolean).join(" — ");
    const pickClass = (p.market || "").toLowerCase().startsWith("over") ? "over" : "under";
    const odds = (p.odds && !isNaN(Number(p.odds))) ? `<span class="badge odds">Odds ${Number(p.odds).toFixed(2)}</span>` : "";

    return `
      <div class="pick-card ${pickClass}">
        <div class="league-line">${league}</div>
        <div class="muted-sm" style="margin:.15rem 0 .35rem">
          ${p.matchTime} — <strong>${p.home}</strong> vs <strong>${p.away}</strong>
        </div>
        <div style="display:flex;align-items:center;gap:.5rem;flex-wrap:wrap">
          <strong>${p.market}</strong>
          <span class="pill conf">Confidence ${p.confidencePct}%</span>
          ${odds}
        </div>
        <div class="muted-sm reasoning" style="margin-top:.5rem">${p.reasoning || ""}</div>
      </div>
    `;
    }

  async function loadPicks(){
    const tgt = document.getElementById('list');
    try{
      tgt.textContent = "Loading…";
      const url = `/api/rpc?action=free-picks&tz=${encodeURIComponent(tzGuess())}`;
      const res = await fetch(url);
      const data = await res.json();
      const picks = Array.isArray(data?.picks) ? data.picks : [];
      if(!picks.length){
        tgt.innerHTML = `<p class="muted">No confident picks available yet today.</p>`;
        return;
      }
      tgt.innerHTML = picks.map(pickCard).join("");
    }catch{
      document.getElementById('list').innerHTML = "<p>Could not load free picks.</p>";
    }
  }

  loadPicks();
</script>

</body>
</html>
