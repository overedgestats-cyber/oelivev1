<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>OverEdge — Free Picks</title>
  <meta name="description" content="Transparent football picks with clear confidence and reasoning."/>
  <link rel="stylesheet" href="/style.css"/>

  <!-- Favicons / icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180.png">
  <link rel="icon" type="image/png" sizes="512x512" href="/overedge-logo-512.png">

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-88C4MQ3EF8"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-88C4MQ3EF8');
  </script>

  <style>
    .lead { font-size: clamp(1.1rem, 1.7vw, 1.2rem); opacity:.8; margin-top:.25rem; }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="nav">
      <a class="logo brand" href="/" aria-label="OverEdge">
  <img class="brand-img" src="/img/overedge-logo.png" alt="" />
  <span class="sr-only">OverEdge</span>
</a>

      <div class="links">
        <a href="/free-picks" aria-current="page">Free Picks</a>
        <a href="/pro">Pro</a>
        <a href="/pricing">Pricing</a>
        <a href="/FAQ">FAQ</a>
        <a href="/account">Account</a>
      </div>
      <div class="auth" style="display:flex;align-items:center;gap:.5rem">
        <span id="nav-plan" class="badge pill" style="display:none"></span>
        <a class="btn small secondary" href="/account">Sign In</a>
      </div>
    </nav>
  </header>

  <main class="section" style="max-width:900px">
  <h1>Today’s Free Picks (preview)</h1>
  <div id="home-free-picks" class="lead">Loading…</div>
  <p><a class="btn" href="/free-picks">View full details →</a></p>
</main>


  <footer class="site-footer">
    <span>© <span id="y"></span> OverEdge — Data beats gut</span>
    <div class="contact">
      <a href="mailto:overedgestats@gmail.com">overedgestats@gmail.com</a>
      &nbsp;·&nbsp;
      <a href="https://www.facebook.com/profile.php?id=61579190114778" target="_blank" rel="noopener">Facebook</a>
      &nbsp;·&nbsp;
      <a href="https://www.instagram.com/overedgefootball" target="_blank" rel="noopener">@overedgefootball</a>
    </div>
  </footer>

  <script>
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
  <script>
  // Year (if you have a footer year element elsewhere)
  const yEl = document.getElementById('y');
  if (yEl) yEl.textContent = new Date().getFullYear();

  function tzGuess(){
    try { return Intl.DateTimeFormat().resolvedOptions().timeZone || "Europe/Sofia"; }
    catch { return "Europe/Sofia"; }
  }

  async function loadPreview() {
    const el = document.getElementById('home-free-picks');
    if (!el) return;
    el.textContent = 'Loading…';
    try {
      const res = await fetch(`/api/rpc?action=free-picks&tz=${encodeURIComponent(tzGuess())}&minConf=75`);
      const data = await res.json();
      if (!data.picks || data.picks.length === 0) {
        el.innerHTML = '<p class="lead">No confident picks available yet today.</p>';
        return;
      }
      el.innerHTML = data.picks.map(p => `
        <div class="card" style="margin:.75rem 0;padding:1rem;border:1px solid #eee;border-radius:12px">
          <div style="font-weight:600">${p.country ? `${p.country} — ` : ""}${p.league}</div>
          <div style="opacity:.7">${p.matchTime} — ${p.home} vs ${p.away}</div>
          <div style="margin:.5rem 0">
            <span style="font-weight:600">${p.market}</span>
            <span style="margin-left:.5rem">(${p.confidencePct}% confidence)</span>
            ${p.odds ? `<span style="margin-left:1rem">Odds: ${p.odds}</span>` : ``}
          </div>
          <div style="font-size:.95rem">${p.reasoning || ""}</div>
        </div>
      `).join('');
    } catch (e) {
      el.innerHTML = '<p class="lead">Could not load picks.</p>';
    }
  }

  document.addEventListener('DOMContentLoaded', loadPreview);
</script>

</body>
</html>
